{% extends 'layouts/dashboard/main.html' %}

{% block title %}
List Menus
{% endblock %}

{% block content %}
<section id="menu" class="content-section">
    <div class="section-header">
        <h2>Menu Management</h2>
        <a href="{{ url_for('menus.create_menu') }}" class="add-btn" id="addMenuBtn">
            <i class="fas fa-plus"></i> Add New Menu
        </a>
    </div>

    <div class="menu-categories" id="filterButtons">
        <button class="category-btn active" data-filter="all">All</button>
        <button class="category-btn" data-filter=".appetizer">Appetizers</button>
        <button class="category-btn" data-filter=".main-course">Main Course</button>
        <button class="category-btn" data-filter=".dessert">Desserts</button>
        <button class="category-btn" data-filter=".drink">Drinks</button>
    </div>

    <div class="menu-items-grid" id="menuMixContainer">
        {% for menu in menus %}
        <div class="menu-item-card mix {{ menu.category|lower|replace(' ', '-') }}">
            <div class="menu-item-image">
                <img src="{{ url_for('static', filename='uploads/menus/' + menu.image) if menu.image else url_for('static', filename='images/default-food.png') }}"
                    alt="{{ menu.name }}">
            </div>
            <div class="menu-item-details">
                <h3>{{ menu.name }}</h3>
                <small class="menu-item-qty">Qty: {{ menu.qty }}</small>
                <p class="menu-item-description">{{ menu.description }}</p>
                <div class="menu-item-meta">
                    <span class="menu-item-price">Rp{{ '{:,.0f}'.format(menu.price | float) }}</span>
                    <span class="menu-item-category">{{ menu.category }}</span>
                </div>
                <div class="menu-item-actions">
                    <form method="POST" action="{{ url_for('menus.delete_menu', id=menu.id) }}"
                        onsubmit="return confirm('Yakin ingin hapus menu ini?')">
                        <a href="{{ url_for('menus.edit_menu', id=menu.id) }}" class="action-btn edit"><i
                                class="fas fa-edit"></i></a>
                        <button type="submit" class="action-btn delete"><i class="fas fa-trash"></i></button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    const mixer = mixitup('#menuMixContainer');

    const filterBtns = document.querySelectorAll('#filterButtons .category-btn');

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        });
    });
</script>
{% endblock %}